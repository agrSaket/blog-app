<a href="/dashboard">&larr; Back</a>
<div class="admin-title">
    <h2>View / Edit Post</h2>
    <form action="/delete-post/<%= data._id %>?_method=DELETE" method="POST">
        <input type="submit" value="Delete" class="btn-delete btn">
    </form>
</div>

<form action="/edit-post/<%= data._id %>?_method=PUT" method="POST">
    <label for="title"><b>Title</b></label>
    <input type="text" placeholder="Post Title" name="title" value="<%= data.title %>">
    <label for="category"><b>Category</b></label>
    <div class="catflexep">
        <div>
            <p id="selecteditem"></p>
        </div>
        <div class="catflexepp">
            <div><p>Change Category - </p></div>
            <div>
            <select name="category" id="categorySelect">
                <option value="Select">Select Category</option>
                <option value="Technology">Technology</option>
                <option value="Travel">Travel</option>
                <option value="Food">Food</option>
                <option value="Fashion">Fashion</option>
                <option value="Health and Wellness">Health and Wellness</option>
                <option value="Lifestyle">Lifestyle</option>
                <option value="Finance">Finance</option>
                <option value="Business">Business</option>
                <option value="Parenting">Parenting</option>
                <option value="DIY and Crafts">DIY and Crafts</option>
                <option value="Sports">Sports</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Education">Education</option>
                <option value="Personal Finance">Personal Finance</option>
                <option value="Book Reviews">Book Reviews</option>
            </select>
        </div>
        </div>
    </div>
    <!-- <input type="text" placeholder="Post Category" name="category" value="<%= data.category %>"> -->
    
    <label for="body"><b>Content</b></label>
    <textarea name="body" cols="50" rows="10"><%= data.body %></textarea>
    <input type="submit" value="Update" class="btn">
</form>


<script>
    const categorySelect = document.getElementById('categorySelect');
    const selectedItem = document.getElementById('selecteditem');
    if (`<%= data.category %> != Select Category`) {
        selectedItem.innerText = `Selected Category : <%= data.category %>`    
    }
    categorySelect.addEventListener('change', () => {
        const selectedOption = categorySelect.options[categorySelect.selectedIndex];
        const defaultOption = categorySelect.options[0];
    
        if (selectedOption.value !== "Select") {
            defaultOption.textContent = selectedOption.textContent;
            selectedItem.innerText = `Selected : <%= data.category %>`
        } else {
            defaultOption.textContent = "Select Category";
        }
    });
</script>